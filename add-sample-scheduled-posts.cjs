/**
 * Add Sample Scheduled Posts for Scheduler Testing
 * This script adds sample scheduled content to test the Hootsuite-like scheduler
 */

const { MongoDBStorage } = require('./server/mongodb-storage');

async function addSampleScheduledPosts() {
  try {
    const storage = new MongoDBStorage();
    
    console.log('Adding Sample Scheduled Posts');
    console.log('============================');
    
    // Get workspace (assuming first workspace)
    const workspaceId = '6847b9cdfabaede1706f2994';
    
    // Sample posts for the next week
    const samplePosts = [
      {
        title: 'Monday Morning Motivation',
        description: 'Start your week strong! üí™ Monday motivation tips for entrepreneurs #MondayMotivation #Entrepreneurship #Success',
        type: 'image',
        platform: 'instagram',
        status: 'scheduled',
        scheduledAt: new Date(Date.now() + 1 * 24 * 60 * 60 * 1000), // Tomorrow
        workspaceId: workspaceId,
        mediaUrl: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400',
        creditsUsed: 1,
        metadata: {
          hashtags: ['#MondayMotivation', '#Entrepreneurship', '#Success'],
          autoGenerated: false
        }
      },
      {
        title: 'Tech Tuesday Tips',
        description: 'Latest tech trends and tips for growing your business üöÄ #TechTuesday #Innovation #DigitalMarketing',
        type: 'video',
        platform: 'instagram',
        status: 'scheduled',
        scheduledAt: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000), // Day after tomorrow
        workspaceId: workspaceId,
        mediaUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
        creditsUsed: 2,
        metadata: {
          hashtags: ['#TechTuesday', '#Innovation', '#DigitalMarketing'],
          autoGenerated: false
        }
      },
      {
        title: 'Wednesday Wisdom',
        description: 'Midweek wisdom for business leaders. Keep pushing forward! üéØ #WednesdayWisdom #Leadership #BusinessTips',
        type: 'image',
        platform: 'facebook',
        status: 'scheduled',
        scheduledAt: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000), // 3 days from now
        workspaceId: workspaceId,
        mediaUrl: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=400',
        creditsUsed: 1,
        metadata: {
          hashtags: ['#WednesdayWisdom', '#Leadership', '#BusinessTips'],
          autoGenerated: false
        }
      },
      {
        title: 'Throwback Thursday',
        description: 'Looking back at our journey and growth üìà #ThrowbackThursday #Growth #Journey',
        type: 'image',
        platform: 'instagram',
        status: 'scheduled',
        scheduledAt: new Date(Date.now() + 4 * 24 * 60 * 60 * 1000), // 4 days from now
        workspaceId: workspaceId,
        mediaUrl: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400',
        creditsUsed: 1,
        metadata: {
          hashtags: ['#ThrowbackThursday', '#Growth', '#Journey'],
          autoGenerated: false
        }
      },
      {
        title: 'Feature Friday',
        description: 'Showcasing amazing features and updates üåü #FeatureFriday #ProductUpdate #Innovation',
        type: 'video',
        platform: 'twitter',
        status: 'scheduled',
        scheduledAt: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000), // 5 days from now
        workspaceId: workspaceId,
        mediaUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_640x360_1mb.mp4',
        creditsUsed: 2,
        metadata: {
          hashtags: ['#FeatureFriday', '#ProductUpdate', '#Innovation'],
          autoGenerated: false
        }
      },
      {
        title: 'Saturday Social',
        description: 'Weekend vibes and community engagement üéâ #SaturdayVibes #Community #Weekend',
        type: 'image',
        platform: 'instagram',
        status: 'scheduled',
        scheduledAt: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000), // 6 days from now
        workspaceId: workspaceId,
        mediaUrl: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400',
        creditsUsed: 1,
        metadata: {
          hashtags: ['#SaturdayVibes', '#Community', '#Weekend'],
          autoGenerated: false
        }
      },
      {
        title: 'Sunday Summary',
        description: 'Weekly recap and goals for next week üìù #SundayReflection #WeeklyGoals #Planning',
        type: 'image',
        platform: 'linkedin',
        status: 'scheduled',
        scheduledAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days from now
        workspaceId: workspaceId,
        mediaUrl: 'https://images.unsplash.com/photo-1484480974693-6ca0a78fb36b?w=400',
        creditsUsed: 1,
        metadata: {
          hashtags: ['#SundayReflection', '#WeeklyGoals', '#Planning'],
          autoGenerated: false
        }
      }
    ];
    
    console.log(`\nCreating ${samplePosts.length} sample scheduled posts...`);
    
    for (let i = 0; i < samplePosts.length; i++) {
      const post = samplePosts[i];
      const savedPost = await storage.createContent(post);
      console.log(`‚úì Created: ${post.title} (${post.platform}) - ID: ${savedPost.id}`);
      console.log(`  Scheduled for: ${post.scheduledAt.toISOString()}`);
    }
    
    // Verify posts were created
    console.log('\nVerifying scheduled content...');
    const scheduledContent = await storage.getScheduledContent(workspaceId);
    console.log(`‚úì Total scheduled posts: ${scheduledContent.length}`);
    
    scheduledContent.forEach((content, index) => {
      console.log(`  ${index + 1}. ${content.title} (${content.platform}) - ${content.scheduledAt}`);
    });
    
    console.log('\n‚úÖ Sample scheduled posts added successfully!');
    console.log('The Hootsuite-like scheduler should now display these posts.');
    
  } catch (error) {
    console.error('‚ùå Error adding sample posts:', error);
  }
}

addSampleScheduledPosts();